import { Claim, ClaimStatus, User, ExpenseCategory } from '@/types';

const mockUser: User = {
  id: '1',
  email: 'john.doe@company.com',
  name: 'John Doe',
  role: 'employee',
  department: 'Engineering',
  avatar: 'https://api.dicebear.com/7.x/avataaars/svg?seed=John',
};

const mockManager: User = {
  id: '2',
  email: 'jane.smith@company.com',
  name: 'Jane Smith',
  role: 'manager',
  department: 'Engineering',
  avatar: 'https://api.dicebear.com/7.x/avataaars/svg?seed=Jane',
};

const categories: Record<string, ExpenseCategory> = {
  travel: {
    id: 'travel',
    name: 'Travel',
    icon: 'Plane',
    maxAmount: 50000,
    requiresDocument: true,
    description: 'Business travel expenses',
  },
  meals: {
    id: 'meals',
    name: 'Team Lunch',
    icon: 'Utensils',
    maxAmount: 5000,
    requiresDocument: true,
    description: 'Team meals and entertainment',
  },
  certification: {
    id: 'certification',
    name: 'Certification',
    icon: 'Award',
    maxAmount: 25000,
    requiresDocument: true,
    description: 'Professional certifications',
  },
  conveyance: {
    id: 'conveyance',
    name: 'Conveyance',
    icon: 'Car',
    maxAmount: 3000,
    requiresDocument: false,
    description: 'Local travel expenses',
  },
};

export const mockClaims: Claim[] = [
  {
    id: '1',
    claimNumber: 'CLM-2024-001',
    type: 'reimbursement',
    category: categories.travel,
    title: 'Client Meeting - Mumbai',
    amount: 15420,
    date: new Date('2024-01-15'),
    vendor: 'MakeMyTrip',
    description: 'Flight and hotel for client meeting in Mumbai',
    projectCode: 'PRJ-2024-100',
    costCenter: 'CC-ENG-001',
    status: 'approved',
    submittedBy: mockUser,
    submittedAt: new Date('2024-01-16'),
    documents: [
      {
        id: 'd1',
        name: 'flight_ticket.pdf',
        url: '/documents/flight.pdf',
        type: 'application/pdf',
        size: 245000,
        uploadedAt: new Date('2024-01-16'),
        ocrConfidence: 95,
      },
    ],
    comments: [
      {
        id: 'c1',
        content: 'Approved as per travel policy',
        author: mockManager,
        createdAt: new Date('2024-01-17'),
        role: 'manager',
      },
    ],
    approvalHistory: [
      {
        id: 'h1',
        action: 'submitted',
        actor: mockUser,
        timestamp: new Date('2024-01-16'),
        fromStatus: 'draft',
        toStatus: 'pending_manager',
      },
      {
        id: 'h2',
        action: 'approved',
        actor: mockManager,
        timestamp: new Date('2024-01-17'),
        comment: 'Approved as per travel policy',
        fromStatus: 'pending_manager',
        toStatus: 'approved',
      },
    ],
    aiConfidenceScore: 95,
    policyViolations: [],
    dataSource: {
      amount: 'ocr',
      vendor: 'ocr',
      date: 'manual',
    },
  },
  {
    id: '2',
    claimNumber: 'CLM-2024-002',
    type: 'reimbursement',
    category: categories.meals,
    title: 'Team Lunch - Project Kickoff',
    amount: 3500,
    date: new Date('2024-01-18'),
    vendor: 'The Grand Hotel',
    description: 'Team lunch for project kickoff celebration',
    projectCode: 'PRJ-2024-101',
    costCenter: 'CC-ENG-001',
    status: 'pending_manager',
    submittedBy: mockUser,
    submittedAt: new Date('2024-01-19'),
    documents: [
      {
        id: 'd2',
        name: 'receipt.jpg',
        url: '/documents/receipt.jpg',
        type: 'image/jpeg',
        size: 125000,
        uploadedAt: new Date('2024-01-19'),
        ocrConfidence: 88,
      },
    ],
    comments: [],
    approvalHistory: [
      {
        id: 'h3',
        action: 'submitted',
        actor: mockUser,
        timestamp: new Date('2024-01-19'),
        fromStatus: 'draft',
        toStatus: 'pending_manager',
      },
    ],
    aiConfidenceScore: 88,
    policyViolations: [],
    dataSource: {
      amount: 'ocr',
      vendor: 'ocr',
      date: 'ocr',
    },
  },
  {
    id: '3',
    claimNumber: 'CLM-2024-003',
    type: 'reimbursement',
    category: categories.certification,
    title: 'AWS Solutions Architect Certification',
    amount: 22000,
    date: new Date('2024-01-20'),
    vendor: 'Amazon Web Services',
    description: 'AWS Solutions Architect Professional certification exam',
    projectCode: 'PRJ-TRAINING',
    costCenter: 'CC-ENG-001',
    status: 'pending_hr',
    submittedBy: mockUser,
    submittedAt: new Date('2024-01-21'),
    documents: [
      {
        id: 'd3',
        name: 'certification_invoice.pdf',
        url: '/documents/cert.pdf',
        type: 'application/pdf',
        size: 180000,
        uploadedAt: new Date('2024-01-21'),
        ocrConfidence: 92,
      },
    ],
    comments: [
      {
        id: 'c2',
        content: 'Forwarded to HR for certification budget approval',
        author: mockManager,
        createdAt: new Date('2024-01-22'),
        role: 'manager',
      },
    ],
    approvalHistory: [
      {
        id: 'h4',
        action: 'submitted',
        actor: mockUser,
        timestamp: new Date('2024-01-21'),
        fromStatus: 'draft',
        toStatus: 'pending_manager',
      },
      {
        id: 'h5',
        action: 'escalated',
        actor: mockManager,
        timestamp: new Date('2024-01-22'),
        comment: 'Forwarded to HR for certification budget approval',
        fromStatus: 'pending_manager',
        toStatus: 'pending_hr',
      },
    ],
    aiConfidenceScore: 78,
    policyViolations: ['Amount exceeds standard certification budget'],
    dataSource: {
      amount: 'manual',
      vendor: 'manual',
      date: 'ocr',
    },
  },
  {
    id: '4',
    claimNumber: 'CLM-2024-004',
    type: 'allowance',
    category: categories.conveyance,
    title: 'Weekly Conveyance - Week 3',
    amount: 1200,
    date: new Date('2024-01-22'),
    vendor: 'Multiple',
    description: 'Local travel for client visits',
    projectCode: 'PRJ-2024-100',
    costCenter: 'CC-ENG-001',
    status: 'rejected',
    submittedBy: mockUser,
    submittedAt: new Date('2024-01-23'),
    documents: [],
    comments: [
      {
        id: 'c3',
        content: 'Duplicate claim detected for the same period',
        author: mockManager,
        createdAt: new Date('2024-01-24'),
        role: 'manager',
      },
    ],
    approvalHistory: [
      {
        id: 'h6',
        action: 'submitted',
        actor: mockUser,
        timestamp: new Date('2024-01-23'),
        fromStatus: 'draft',
        toStatus: 'pending_manager',
      },
      {
        id: 'h7',
        action: 'rejected',
        actor: mockManager,
        timestamp: new Date('2024-01-24'),
        comment: 'Duplicate claim detected for the same period',
        fromStatus: 'pending_manager',
        toStatus: 'rejected',
      },
    ],
    aiConfidenceScore: 45,
    policyViolations: ['Duplicate claim detected'],
    dataSource: {
      amount: 'manual',
      vendor: 'manual',
      date: 'manual',
    },
  },
  {
    id: '5',
    claimNumber: 'CLM-2024-005',
    type: 'reimbursement',
    category: categories.travel,
    title: 'Conference - Tech Summit 2024',
    amount: 45000,
    date: new Date('2024-01-25'),
    vendor: 'Tech Events Inc',
    description: 'Registration and travel for Tech Summit 2024',
    projectCode: 'PRJ-TRAINING',
    costCenter: 'CC-ENG-001',
    status: 'pending_finance',
    submittedBy: mockUser,
    submittedAt: new Date('2024-01-26'),
    documents: [
      {
        id: 'd4',
        name: 'registration.pdf',
        url: '/documents/reg.pdf',
        type: 'application/pdf',
        size: 320000,
        uploadedAt: new Date('2024-01-26'),
        ocrConfidence: 91,
      },
      {
        id: 'd5',
        name: 'travel_itinerary.pdf',
        url: '/documents/travel.pdf',
        type: 'application/pdf',
        size: 280000,
        uploadedAt: new Date('2024-01-26'),
        ocrConfidence: 89,
      },
    ],
    comments: [],
    approvalHistory: [
      {
        id: 'h8',
        action: 'submitted',
        actor: mockUser,
        timestamp: new Date('2024-01-26'),
        fromStatus: 'draft',
        toStatus: 'pending_manager',
      },
      {
        id: 'h9',
        action: 'approved',
        actor: mockManager,
        timestamp: new Date('2024-01-27'),
        fromStatus: 'pending_manager',
        toStatus: 'pending_finance',
      },
    ],
    aiConfidenceScore: 90,
    policyViolations: [],
    dataSource: {
      amount: 'ocr',
      vendor: 'ocr',
      date: 'ocr',
    },
  },
  {
    id: '6',
    claimNumber: 'CLM-2024-006',
    type: 'reimbursement',
    category: categories.meals,
    title: 'Client Dinner',
    amount: 4200,
    date: new Date('2024-01-28'),
    vendor: 'Taj Restaurant',
    description: 'Dinner with key client stakeholders',
    projectCode: 'PRJ-2024-100',
    costCenter: 'CC-SALES-001',
    status: 'settled',
    submittedBy: mockUser,
    submittedAt: new Date('2024-01-29'),
    documents: [
      {
        id: 'd6',
        name: 'dinner_bill.jpg',
        url: '/documents/dinner.jpg',
        type: 'image/jpeg',
        size: 98000,
        uploadedAt: new Date('2024-01-29'),
        ocrConfidence: 94,
      },
    ],
    comments: [],
    approvalHistory: [
      {
        id: 'h10',
        action: 'submitted',
        actor: mockUser,
        timestamp: new Date('2024-01-29'),
        fromStatus: 'draft',
        toStatus: 'pending_manager',
      },
      {
        id: 'h11',
        action: 'approved',
        actor: mockManager,
        timestamp: new Date('2024-01-30'),
        fromStatus: 'pending_manager',
        toStatus: 'approved',
      },
    ],
    aiConfidenceScore: 94,
    policyViolations: [],
    dataSource: {
      amount: 'ocr',
      vendor: 'ocr',
      date: 'ocr',
    },
  },
];

export function getClaimsByStatus(status?: ClaimStatus): Claim[] {
  if (!status) return mockClaims;
  return mockClaims.filter((claim) => claim.status === status);
}

export function getClaimById(id: string): Claim | undefined {
  return mockClaims.find((claim) => claim.id === id || claim.claimNumber === id);
}

export function getPendingApprovals(role: string): Claim[] {
  const statusMap: Record<string, ClaimStatus> = {
    manager: 'pending_manager',
    hr: 'pending_hr',
    finance: 'pending_finance',
  };
  const targetStatus = statusMap[role];
  if (!targetStatus) return [];
  return mockClaims.filter((claim) => claim.status === targetStatus);
}
